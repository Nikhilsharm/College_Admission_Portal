<%- include('./sidebar.ejs') %>
<%- include('./header.ejs') %>

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1 class="m-0 text-dark">Welcome </h1>
        </div><!-- /.col -->
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <!-- Breadcrumbs can be added here if needed -->
          </ol>
        </div><!-- /.col -->
      </div><!-- /.row -->
    </div><!-- /.container-fluid -->
  </div>
  <!-- /.content-header -->


<!-- Client-side JavaScript -->
<script>
  // Function to fetch user data
  function fetchUsers() {
    fetch('/admin/dashboard/getUsers')  // Fetch data from the server
      .then(response => response.json())
      .then(data => {
        let tableContent = 'User Data:\n\n'; // Initial string for the alert

        // Loop through the fetched data and format it
        data.forEach(item => {
          tableContent += `
            Id: ${item._id}\n
            Name: ${item.name}\n
            Email: ${item.email}\n
            Course: ${item.course}\n
            Status: ${item.status}\n
            ---------------------------\n
          `;
        });

        // Show the formatted data in an alert
        alert(tableContent);
      })
      .catch(error => {
        console.error('Error fetching users:', error);
        alert('Failed to fetch user data. Please try again later.');
      });
  }

  // Call the fetchUsers function when the page loads
  window.onload = fetchUsers;
</script>

<%- include('./footer.ejs') %>
